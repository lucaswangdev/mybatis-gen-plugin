---
allwaysApply: true
---

# AI 日志记录规则

## 概述

本文档定义了AI在处理日志记录相关任务时必须遵循的标准规则。**所有日志相关任务必须按照此规则进行，确保日志信息准确、日志级别恰当、日志格式规范。**

## 1. 日志记录总则

AI在处理任何日志记录相关任务时，必须严格按照以下原则执行：

### 1.1 日志级别原则
- **ERROR**：系统错误、异常情况，需要立即处理
- **WARN**：潜在问题、警告信息，不影响正常运行
- **INFO**：重要业务信息、系统状态变化
- **DEBUG**：调试信息、详细执行过程
- **TRACE**：最详细的跟踪信息

### 1.2 日志内容原则
- **准确性**：日志信息应准确反映实际情况
- **完整性**：包含必要的上下文信息
- **安全性**：避免记录敏感信息（如密码、密钥）
- **可读性**：日志信息应易于理解和分析

### 1.3 日志格式规范
- **时间戳**：包含精确的时间信息
- **级别标识**：明确标识日志级别
- **上下文信息**：包含类名、方法名、线程信息
- **消息内容**：清晰描述事件或状态

## 2. 日志记录规范

### 2.1 错误日志记录
```java
// 记录异常信息
logger.error("数据库连接失败", exception);
// 包含上下文信息
logger.error("用户{}登录失败，原因：{}", userId, reason);
```

### 2.2 业务日志记录
```java
// 重要业务操作
logger.info("用户{}创建订单{}成功", userId, orderId);
// 状态变化
logger.info("订单{}状态从{}变更为{}", orderId, oldStatus, newStatus);
```

### 2.3 调试日志记录
```java
// 方法入口
logger.debug("进入方法processOrder，参数：{}", order);
// 关键步骤
logger.debug("查询数据库结果：{}", result.size());
// 方法出口
logger.debug("方法processOrder执行完成，返回：{}", returnValue);
```

### 2.4 性能日志记录
```java
long startTime = System.currentTimeMillis();
// 业务处理
long endTime = System.currentTimeMillis();
logger.info("业务处理耗时：{}ms", (endTime - startTime));
```

## 3. 日志框架使用

### 3.1 SLF4J规范
- 使用SLF4J API进行日志记录
- 支持占位符{}语法
- 避免字符串拼接，提高性能

### 3.2 日志门面模式
- 使用Logger接口抽象日志实现
- 支持运行时切换日志框架
- 统一日志API调用

### 3.3 Maven插件日志
- 使用Maven提供的日志接口
- 集成到Maven构建生命周期
- 支持不同日志级别输出

## 4. 日志配置管理

### 4.1 配置文件
```properties
# 日志级别配置
logging.level.com.lucaswangdev=INFO
logging.level.com.lucaswangdev.generator=DEBUG

# 日志输出格式
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
```

### 4.2 运行时配置
- 支持通过系统属性动态调整日志级别
- 提供日志配置热更新能力
- 区分开发和生产环境配置

## 5. 日志分析和监控

### 5.1 日志聚合
- 使用ELK等工具进行日志聚合
- 支持分布式系统日志收集
- 提供日志搜索和过滤功能

### 5.2 异常监控
- 自动检测异常日志模式
- 触发告警机制
- 生成异常统计报告

### 5.3 性能监控
- 分析日志中的性能指标
- 识别性能瓶颈
- 生成性能趋势报告

## 6. 最佳实践

### 6.1 日志记录时机
- 方法入口和出口
- 重要业务节点
- 异常发生时
- 外部系统调用

### 6.2 日志内容要点
- 用户标识、操作类型
- 请求参数、返回结果
- 执行时间、资源消耗
- 错误原因、堆栈信息

### 6.3 日志维护
- 定期清理过期日志
- 压缩存储节省空间
- 备份重要日志数据
- 遵守数据保留政策